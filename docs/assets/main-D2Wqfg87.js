import{l as o,I as d,w as g,c as u,g as m,s as f,a as w}from"./load-external-script-C5_5B21p.js";const h=window.videoLength||20*1e3;let r=window.videoURL||"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4";const p=window.gameConfigs||w;window.FullyKiosk&&(r="http://localhost/sdcard/video.mp4");function y(){const{modal:e,modalManager:n}=u(r);return o.log(document.readyState),document.body.appendChild(e),o.log("The elements have been loaded successfully!"),{modalManager:n,modal:e}}function F(e){return p.find(n=>e.includes(n.urlPath))}function T(){var t,i,s;const e=F(window.location.pathname);if(!e)return!1;let n=(t=e==null?void 0:e.triggerFunc)==null?void 0:t.path,a=(i=m(n))==null?void 0:i.func;if(!a||typeof a!="function"){if(n=(s=f(e.triggerFunc.name))==null?void 0:s[0],!n)throw new Error("No wrapping function found.");e.triggerFunc.path=n,o.log("Function search successfully completed!")}else o.log("Trigger function successfully extracted from configuration!");return e}async function l(e){return new Promise(n=>setTimeout(n,e))}async function c(){document.readyState!=="complete"&&await new Promise(t=>window.onload=t);const e=T();if(!e){console.info("The current game is not yet supported.");return}o.log("path:",e.triggerFunc.path);const{modalManager:n,modal:a}=y();g(e.triggerFunc.path,null,async()=>{o.log("Video playback begins..."),await l(e.delay),n.show(),await l(h+e.delay),n.hide()}),o.log("The video element has successfully loaded!"),window.modalManager=n}async function v(){const e=import.meta.url;o.log(`The script runs under the address ${window.location.href}`),window.self!==window.top?(o.log("The page is inside an iframe."),await c()):(o.log("The page is not inside an iframe."),window.location.href.includes("new_game")||window.location.hostname==="localhost"?await c():d(e))}v();
