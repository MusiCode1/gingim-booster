import{l as n,I as d,w as g,c as u,g as f,s as m,a as w}from"./load-external-script-C5_5B21p.js";window.fully||(window.fully={startApplication(){n.log("call to startApplication")},bringToForeground(){n.log("call to bringToForeground")}});const p=window.videoLength||30*1e3;let c=window.videoURL||"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4";const h=window.gameConfigs||w;window.FullyKiosk&&(c="http://localhost/sdcard/video.mp4");function y(){const{modal:e,modalManager:o}=u(c);return n.log(document.readyState),document.body.appendChild(e),n.log("The elements have been loaded successfully!"),{modalManager:o,modal:e}}function F(e){return h.find(o=>e.includes(o.urlPath))}function T(){var t,i,l;const e=F(window.location.pathname);if(!e)return!1;let o=(t=e==null?void 0:e.triggerFunc)==null?void 0:t.path,a=(i=f(o))==null?void 0:i.func;if(!a||typeof a!="function"){if(o=(l=m(e.triggerFunc.name))==null?void 0:l[0],!o)throw new Error("No wrapping function found.");e.triggerFunc.path=o,n.log("Function search successfully completed!")}else n.log("Trigger function successfully extracted from configuration!");return e}async function r(e){return new Promise(o=>setTimeout(o,e))}async function s(){document.readyState!=="complete"&&await new Promise(t=>window.onload=t);const e=T();if(!e){console.info("The current game is not yet supported.");return}n.log("path:",e.triggerFunc.path);const{modalManager:o,modal:a}=y();g(e.triggerFunc.path,null,async()=>{n.log("Video playback begins..."),await r(e.delay),fully.startApplication("com.edujoy.fidget.pop.it"),await r(p+e.delay),fully.bringToForeground()}),n.log("The video element has successfully loaded!"),window.modalManager=o}async function b(){const e=import.meta.url;n.log(`The script runs under the address ${window.location.href}`),window.self!==window.top?(n.log("The page is inside an iframe."),await s()):(n.log("The page is not inside an iframe."),window.location.href.includes("new_game")||window.location.hostname==="localhost"?await s():d(e))}b();
