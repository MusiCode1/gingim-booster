(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(o){if(o.ep)return;o.ep=!0;const t=a(o);fetch(o.href,t)}})();function h(e){const n=s=>!isNaN(s),a=s=>s.split(/[\.\[\]]+/).filter(Boolean);if(!e)return;const i=a(e),o=i.pop();let t=window;for(let s=0;s<i.length;s++){const r=n(i[s])?Number(i[s]):i[s];t=t[r]}return{func:t[o],context:t,funcName:o}}function I(e,n,a){const{func:i,context:o,funcName:t}=e;o[t]=function(...c){n&&n();const s=i.apply(this,c);return a&&a(),s}}function C(e,n=null,a=null){const i=h(e);I(i,n,a)}function A(e){const n=new Set;function a(t){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?`.${t}`:`[${JSON.stringify(t)}]`}function i(t,c="",s=new Set){if(!s.has(t)){s.add(t);for(let r in t)try{const d=Array.isArray(t)?`${c}[${r}]`:`${c}${a(r)}`;typeof t[r]=="function"&&r===e&&(n.add(d.replace(/^\./,"")),window[r]===t[r]&&n.add(r)),typeof t[r]=="object"&&t[r]!==null&&i(t[r],d,s)}catch{continue}}}function o(t,c=""){typeof t[e]=="function"&&n.add(`${c}${a(e)}`);for(let s=0;s<t.children.length;s++){const r=t.children[s],d=`${c}${a("children")}[${s}]`;o(r,d)}t.shadowRoot&&o(t.shadowRoot,`${c}${a("shadowRoot")}`)}return i(window),o(document.documentElement,"document.documentElement"),typeof window[e]=="function"&&n.add(e),Array.from(n).sort((t,c)=>t.length-c.length)}function y(...e){console.log(...e)}const l={log:y};function g(e,n,a=2e3){const t=1/(a/50);if(n==="fadeIn"){e.volume=0,e.play();const c=setInterval(()=>{e.volume<1?e.volume=Math.min(1,e.volume+t):clearInterval(c)},50)}else if(n==="fadeOut"){const c=setInterval(()=>{e.volume>0?e.volume=Math.max(0,e.volume-t):(clearInterval(c),e.pause())},50)}else console.error('Invalid action. Use "fadeIn" or "fadeOut".')}function N(e){const n=document.createElement("div");n.className="modal",n.setAttribute("dir","rtl");const a=document.createElement("div");a.className="main-container";const i=document.createElement("div");i.className="card";const o=document.createElement("h1");o.innerText="הגיע הזמן לסרטון!";const t=document.createElement("video");t.controls=!0;const c=document.createElement("source");c.src=e,t.appendChild(c),t.innerHTML+="הדפדפן שלך אינו תומך בתגית הווידאו.",i.appendChild(o),i.appendChild(t),a.appendChild(i),n.appendChild(a);const s=document.createElement("link");s.href=new URL("data:text/css;base64,Ym9keSwNCmh0bWwgew0KICAgIG1hcmdpbjogMDsNCiAgICBwYWRkaW5nOiAwOw0KICAgIGhlaWdodDogMTAwJTsNCn0NCg0KLm1vZGFsIHsNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgdG9wOiAwOw0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44KTsNCiAgICAvKiDXqNen16Ig16nXp9eV16Mg15vXlNeUICovDQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIA0KICAgIC8qINee16LXnCDXm9ecINeT15HXqCDXkNeX16ggKi8NCg0KfQ0KDQoubW9kYWwgew0KICAgIHotaW5kZXg6IC0xOw0KfQ0KDQoubW9kYWwsDQoubWFpbi1jb250YWluZXIgew0KICAgIHRyYW5zaXRpb246IGFsbCAxczsNCiAgICBvcGFjaXR5OiAwOw0KDQp9DQoNCi5tb2RhbC5zaG93IHsNCiAgICBvcGFjaXR5OiAxOw0KICAgIHotaW5kZXg6IDEwMDA7DQp9DQoNCi5tb2RhbC5zaG93IC5tYWluLWNvbnRhaW5lciB7DQogICAgb3BhY2l0eTogMTsNCiAgICB0cmFuc2l0aW9uLWRlbGF5OiAxczsNCn0NCg0KLm1haW4tY29udGFpbmVyIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQoNCiAgICBtYXJnaW46IDEwcHg7DQp9DQoNCi5jYXJkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQzLCAyNTUsIDEzNSk7DQogICAgcGFkZGluZzogMjBweDsNCiAgICBib3JkZXItcmFkaXVzOiAzMHB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KDQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KaDEgew0KICAgIG1hcmdpbi10b3A6IDVweDsNCn0NCg0KdmlkZW8gew0KICAgIG1heC1oZWlnaHQ6IDEwMCU7DQogICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgIHdpZHRoOiA5NTBweDsNCiAgICBib3JkZXItcmFkaXVzOiAxNXB4Ow0KfQ==",import.meta.url).href,s.rel="stylesheet",document.head.appendChild(s);const r={status:"hide",show(){this.status="show",n.classList.add("show"),g(t,"fadeIn")},hide(){this.status="hide",n.classList.remove("show"),g(t,"fadeOut")},toggle(){this.status==="show"?this.hide():this.show()}};return l.log(),{modal:n,modalManager:r}}const u={makeMovie:{name:"makeMovie",path:"PIXI.game.state.states.game.makeMovie"},onShowAnimation:{name:"onShowAnimation",path:"PIXI.game.state.states.game.onShowAnimation"}},b=[{gameName:"tidy_up",triggerFunc:u.makeMovie,delay:5*1e3,urlPath:"/wp-content/uploads/new_games/tidy_up/"},{gameName:"touch_go",triggerFunc:u.makeMovie,delay:5*1e3,urlPath:"wp-content/uploads/new_games/touch_go/"},{gameName:"earase_animals",triggerFunc:u.onShowAnimation,delay:5*1e3,urlPath:"/wp-content/uploads/new_games/earase_animals/"},{gameName:"earase_animals",triggerFunc:u.onShowAnimation,delay:5*1e3,urlPath:"/wp-content/uploads/new_games/earase_animals/"}];function v(e){let n=`
`;return n+=G.toString(),n+=`

`,n+=`loadExternalScript('${e}')
`,n}function D(e){function n(i){try{l.log("iFrame creating!");const o=i.contentDocument.createElement("script"),t=v(e);o.textContent=t,l.log("Script ready for injection..."),i.contentWindow.onload=()=>{i.contentDocument.head.appendChild(o)},l.log("The script has been injected")}catch(o){console.error("Cannot access iframe due to cross-origin restrictions"),console.error(o)}}new MutationObserver(i=>{i.forEach(o=>{o.addedNodes.forEach(t=>{t.tagName==="IFRAME"&&n(t)})})}).observe(document.body,{childList:!0,subtree:!0})}function G(e){const n=document.createElement("script");n.src=e,n.async=!0,n.type="module",document.head.appendChild(n)}const O=window.videoLength||20*1e3;let f=window.videoURL||"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4";const F=window.gameConfigs||b;window.FullyKiosk&&(f="http://localhost/sdcard/video.mp4");function W(){const{modal:e,modalManager:n}=N(f);return l.log(document.readyState),document.body.appendChild(e),l.log("The elements have been loaded successfully!"),{modalManager:n,modal:e}}function Z(e){return F.find(n=>e.includes(n.urlPath))}function M(){var i,o,t;const e=Z(window.location.pathname);if(!e)return!1;let n=(i=e==null?void 0:e.triggerFunc)==null?void 0:i.path,a=(o=h(n))==null?void 0:o.func;if(!a||typeof a!="function"){if(n=(t=A(e.triggerFunc.name))==null?void 0:t[0],!n)throw new Error("No wrapping function found.");e.triggerFunc.path=n,l.log("Function search successfully completed!")}else l.log("Trigger function successfully extracted from configuration!");return e}async function m(e){return new Promise(n=>setTimeout(n,e))}async function p(){document.readyState!=="complete"&&await new Promise(i=>window.onload=i);const e=M();if(!e){console.info("The current game is not yet supported.");return}l.log("path:",e.triggerFunc.path);const{modalManager:n,modal:a}=W();C(e.triggerFunc.path,null,async()=>{l.log("Video playback begins..."),await m(e.delay),n.show(),await m(O+e.delay),n.hide()}),l.log("The video element has successfully loaded!"),window.modalManager=n}async function w(){const e=import.meta.url;l.log(`The script runs under the address ${window.location.href}`),window.self!==window.top?(l.log("The page is inside an iframe."),await p()):(l.log("The page is not inside an iframe."),window.location.href.includes("new_game")||window.location.hostname==="localhost"?await p():D(e))}w();w();(()=>{function e(a){const i=document.createElement("script");i.src=a,i.async=!0,i.type="module",document.head.appendChild(i)}e("https://musicode1.github.io/FullyKiosk/gingim-video-cover/main.js")})();
