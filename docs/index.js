(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(o){if(o.ep)return;o.ep=!0;const e=a(o);fetch(o.href,e)}})();function p(t){const n=s=>!isNaN(s),a=s=>s.split(/[\.\[\]]+/).filter(Boolean);if(!t)return;const i=a(t),o=i.pop();let e=window;for(let s=0;s<i.length;s++){const r=n(i[s])?Number(i[s]):i[s];e=e[r]}return{func:e[o],context:e,funcName:o}}function I(t,n,a){const{func:i,context:o,funcName:e}=t;o[e]=function(...c){n&&n();const s=i.apply(this,c);return a&&a(),s}}function C(t,n=null,a=null){const i=p(t);I(i,n,a)}function A(t){const n=new Set;function a(e){return/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?`.${e}`:`[${JSON.stringify(e)}]`}function i(e,c="",s=new Set){if(!s.has(e)){s.add(e);for(let r in e)try{const d=Array.isArray(e)?`${c}[${r}]`:`${c}${a(r)}`;typeof e[r]=="function"&&r===t&&(n.add(d.replace(/^\./,"")),window[r]===e[r]&&n.add(r)),typeof e[r]=="object"&&e[r]!==null&&i(e[r],d,s)}catch{continue}}}function o(e,c=""){typeof e[t]=="function"&&n.add(`${c}${a(t)}`);for(let s=0;s<e.children.length;s++){const r=e.children[s],d=`${c}${a("children")}[${s}]`;o(r,d)}e.shadowRoot&&o(e.shadowRoot,`${c}${a("shadowRoot")}`)}return i(window),o(document.documentElement,"document.documentElement"),typeof window[t]=="function"&&n.add(t),Array.from(n).sort((e,c)=>e.length-c.length)}function y(...t){console.log(...t)}const l={log:y};function g(t,n,a=2e3){const e=1/(a/50);if(n==="fadeIn"){t.volume=0,t.play();const c=setInterval(()=>{t.volume<1?t.volume=Math.min(1,t.volume+e):clearInterval(c)},50)}else if(n==="fadeOut"){const c=setInterval(()=>{t.volume>0?t.volume=Math.max(0,t.volume-e):(clearInterval(c),t.pause())},50)}else console.error('Invalid action. Use "fadeIn" or "fadeOut".')}function N(t){const n=document.createElement("div");n.className="modal",n.setAttribute("dir","rtl");const a=document.createElement("div");a.className="main-container";const i=document.createElement("div");i.className="card";const o=document.createElement("h1");o.innerText="הגיע הזמן לסרטון!";const e=document.createElement("video");e.controls=!0;const c=document.createElement("source");c.src=t,e.appendChild(c),e.innerHTML+="הדפדפן שלך אינו תומך בתגית הווידאו.",i.appendChild(o),i.appendChild(e),a.appendChild(i),n.appendChild(a);const s=document.createElement("link");s.href=new URL("data:text/css;base64,Ym9keSwNCmh0bWwgew0KICAgIG1hcmdpbjogMDsNCiAgICBwYWRkaW5nOiAwOw0KICAgIGhlaWdodDogMTAwJTsNCn0NCg0KLm1vZGFsIHsNCiAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgdG9wOiAwOw0KICAgIGxlZnQ6IDA7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaGVpZ2h0OiAxMDAlOw0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC44KTsNCiAgICAvKiDXqNen16Ig16nXp9eV16Mg15vXlNeUICovDQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIA0KICAgIC8qINee16LXnCDXm9ecINeT15HXqCDXkNeX16ggKi8NCg0KfQ0KDQoubW9kYWwgew0KICAgIHotaW5kZXg6IC0xOw0KfQ0KDQoubW9kYWwsDQoubWFpbi1jb250YWluZXIgew0KICAgIHRyYW5zaXRpb246IGFsbCAxczsNCiAgICBvcGFjaXR5OiAwOw0KDQp9DQoNCi5tb2RhbC5zaG93IHsNCiAgICBvcGFjaXR5OiAxOw0KICAgIHotaW5kZXg6IDEwMDA7DQp9DQoNCi5tb2RhbC5zaG93IC5tYWluLWNvbnRhaW5lciB7DQogICAgb3BhY2l0eTogMTsNCiAgICB0cmFuc2l0aW9uLWRlbGF5OiAxczsNCn0NCg0KLm1haW4tY29udGFpbmVyIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQoNCiAgICBtYXJnaW46IDEwcHg7DQp9DQoNCi5jYXJkIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQzLCAyNTUsIDEzNSk7DQogICAgcGFkZGluZzogMjBweDsNCiAgICBib3JkZXItcmFkaXVzOiAzMHB4Ow0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KDQogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KaDEgew0KICAgIG1hcmdpbi10b3A6IDVweDsNCn0NCg0KdmlkZW8gew0KICAgIG1heC1oZWlnaHQ6IDEwMCU7DQogICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgIHdpZHRoOiA5NTBweDsNCiAgICBib3JkZXItcmFkaXVzOiAxNXB4Ow0KfQ==",import.meta.url).href,s.rel="stylesheet",document.head.appendChild(s);const r={status:"hide",show(){this.status="show",n.classList.add("show"),g(e,"fadeIn")},hide(){this.status="hide",n.classList.remove("show"),g(e,"fadeOut")},toggle(){this.status==="show"?this.hide():this.show()}};return l.log(),{modal:n,modalManager:r}}const u={makeMovie:{name:"makeMovie",path:"PIXI.game.state.states.game.makeMovie"},onShowAnimation:{name:"onShowAnimation",path:"PIXI.game.state.states.game.onShowAnimation"}},b=[{gameName:"tidy_up",triggerFunc:u.makeMovie,delay:5*1e3,urlPath:"/wp-content/uploads/new_games/tidy_up/"},{gameName:"touch_go",triggerFunc:u.makeMovie,delay:5*1e3,urlPath:"wp-content/uploads/new_games/touch_go/"},{gameName:"earase_animals",triggerFunc:u.onShowAnimation,delay:5*1e3,urlPath:"/wp-content/uploads/new_games/earase_animals/"},{gameName:"earase_animals",triggerFunc:u.onShowAnimation,delay:5*1e3,urlPath:"/wp-content/uploads/new_games/earase_animals/"}];function D(t){const n=m.name;let a=`
`;return a+=m.toString(),a+=`

`,a+=`${n}('${t}')
`,a}function v(t){function n(i){try{l.log("iFrame creating!");const o=i.contentDocument.createElement("script"),e=D(t);o.textContent=e,l.log("Script ready for injection..."),i.contentWindow.onload=()=>{i.contentDocument.head.appendChild(o)},l.log("The script has been injected")}catch(o){console.error("Cannot access iframe due to cross-origin restrictions"),console.error(o)}}new MutationObserver(i=>{i.forEach(o=>{o.addedNodes.forEach(e=>{e.tagName==="IFRAME"&&n(e)})})}).observe(document.body,{childList:!0,subtree:!0})}function m(t){const n=document.createElement("script");n.src=t,n.async=!0,n.type="module",document.head.appendChild(n)}const G=window.videoLength||20*1e3;let w=window.videoURL||"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4";const O=window.gameConfigs||b;window.FullyKiosk&&(w="http://localhost/sdcard/video.mp4");function W(){const{modal:t,modalManager:n}=N(w);return l.log(document.readyState),document.body.appendChild(t),l.log("The elements have been loaded successfully!"),{modalManager:n,modal:t}}function F(t){return O.find(n=>t.includes(n.urlPath))}function Z(){var i,o,e;const t=F(window.location.pathname);if(!t)return!1;let n=(i=t==null?void 0:t.triggerFunc)==null?void 0:i.path,a=(o=p(n))==null?void 0:o.func;if(!a||typeof a!="function"){if(n=(e=A(t.triggerFunc.name))==null?void 0:e[0],!n)throw new Error("No wrapping function found.");t.triggerFunc.path=n,l.log("Function search successfully completed!")}else l.log("Trigger function successfully extracted from configuration!");return t}async function f(t){return new Promise(n=>setTimeout(n,t))}async function h(){document.readyState!=="complete"&&await new Promise(i=>window.onload=i);const t=Z();if(!t){console.info("The current game is not yet supported.");return}l.log("path:",t.triggerFunc.path);const{modalManager:n,modal:a}=W();C(t.triggerFunc.path,null,async()=>{l.log("Video playback begins..."),await f(t.delay),n.show(),await f(G+t.delay),n.hide()}),l.log("The video element has successfully loaded!"),window.modalManager=n}async function M(){const t=import.meta.url;l.log(`The script runs under the address ${window.location.href}`),window.self!==window.top?(l.log("The page is inside an iframe."),await h()):(l.log("The page is not inside an iframe."),window.location.href.includes("new_game")||window.location.hostname==="localhost"?await h():v(t))}M();
